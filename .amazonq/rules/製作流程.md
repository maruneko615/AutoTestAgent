# 熱測工具製作流程

## 概述

本文件描述熱測工具的完整製作流程，從遊戲配置到最終測試工具的四階段開發流程。

---

## 🔄 完整工作流程

### 階段 1: 遊戲開發階段
**負責人**: 遊戲開發團隊

```
遊戲端人員
├── 依照格式製作 GameSetting\AutoTest_Game_Setting.md
├── 定義遊戲狀態、按鍵映射、選項內容
├── 使用 qcli_create_proto.bat 轉換成 proto 文件
└── 使用 protoc.exe 生成 GameFlowData_pb2.py 和 InputCommand_pb2.py
```

**輸入**: 遊戲邏輯需求
**輸出**: 標準化的 GameSetting.md + Proto 文件

### 階段 2: Agent 生成階段
**工具**: AgentMaker (使用 Q CLI)

```
AgentMaker (Q CLI 工具)
├── 讀取 GameSetting.md 配置
├── 動態分析 Protobuf Schema (提取實際按鍵)
├── 呼叫 Q CLI 生成程式碼
└── 輸出基礎版 AutoTestAgent.exe
```

**輸入**: GameSetting.md + Proto Schema
**輸出**: 通用的 AutoTestAgent.exe

### 階段 3: 測試定制階段
**負責人**: 測試團隊 (透過雲端 Git Action)

```
測試人員 (透過雲端 Git Action)
├── 在專案 Git 倉庫下指令
├── 指定測試參數 (例: 某流程只使用特定 input)
├── 觸發 AutoTestBuilder 執行
└── 生成定制化的測試工具
```

**輸入**: 測試需求指令 (Git Action)
**輸出**: 測試參數配置

### 階段 4: 最終建置階段
**工具**: AutoTestBuilder

```
AutoTestBuilder
├── 讀取測試人員的指令參數
├── 修改基礎版 AutoTestAgent
├── 注入特定的測試邏輯
└── 輸出最終的測試工具
```

**輸入**: 基礎 Agent + 測試參數
**輸出**: 定制化測試工具

---

## 🛠️ 工具鏈架構

```
GameSetting.md → AgentMaker → AutoTestAgent (基礎版)
                                    ↓
Git Action 指令 → AutoTestBuilder → AutoTestAgent (定制版)
```

---

## 📋 定制化指令範例

### Git Action 指令格式
```bash
# 指定流程使用特定輸入
./AutoTestBuilder --flow=SelectMode --input=Left --repeat=10

# 指定流程使用隨機輸入
./AutoTestBuilder --flow=SelectBike --input=Random --duration=5min

# 指定多個流程的測試邏輯
./AutoTestBuilder --flow=SelectMode --input=Right --flow=SelectBike --input=Left
```

### 測試參數類型
- `--flow`: 指定遊戲流程狀態
- `--input`: 指定輸入類型 (特定按鍵或 Random)
- `--repeat`: 重複次數
- `--duration`: 執行時間
- `--delay`: 輸入間隔

---

## 🎯 各階段產出物

| 階段 | 產出物 | 格式 | 用途 |
|------|--------|------|------|
| 1 | GameSetting.md | Markdown | 遊戲配置定義 |
| 1 | Proto 文件 | .proto + _pb2.py | 通訊協定 |
| 2 | AutoTestAgent (基礎版) | .exe | 通用測試工具 |
| 3 | 測試參數 | JSON/Config | 定制化配置 |
| 4 | AutoTestAgent (定制版) | .exe | 最終測試工具 |

---

## 🔧 技術特色

### AgentMaker 特色
- 配置驅動的程式碼生成
- Q CLI 整合
- 動態 Protobuf 分析
- 智能按鍵映射生成
- 跨遊戲自動適配能力

### AutoTestAgent 特色
- UDP 通訊 + Protobuf 協定
- 持續監聽與自動重連
- 即時日誌輸出
- 隨機輸入預設行為
- 狀態機架構

### AutoTestBuilder 特色
- Git Action 整合
- 動態邏輯注入
- 參數化測試配置

---

## 📝 使用流程

1. **遊戲開發完成** → 製作 GameSetting.md
2. **執行 AgentMaker** → 生成基礎 AutoTestAgent
3. **測試需求確定** → 透過 Git Action 下指令
4. **執行 AutoTestBuilder** → 生成定制化測試工具
5. **開始自動測試** → 運行最終的 AutoTestAgent

---

**建立時間**: 2025-09-06  
**版本**: 1.0  
**維護者**: AutoTest 開發團隊
